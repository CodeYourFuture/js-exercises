(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{l2ti:function(e,t,n){"use strict";n.r(t);var r=n("J4zp"),i=n.n(r),o=n("lwsE"),s=n.n(o),a=n("W8MJ"),c=n.n(a),u=n("lSNA"),l=n.n(u),v=n("+i87"),d=n("a1gu"),p=n.n(d),h=n("Nsbk"),_=n.n(h),f=n("PJYZ"),C=n.n(f),m=n("7W2i"),g=n.n(m),y=n("+qE3"),w=n("RIqP"),L=n.n(w),S=n("E8TQ"),T=function(e){function t(){var e,n;s()(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=p()(this,(e=_()(t)).call.apply(e,[this].concat(i))),l()(C()(n),"_handleKeyDown",(function(e){e.keyCode===S.c&&n.close()})),l()(C()(n),"close",(function(){var e=document.querySelector("html");e.style.overflow="",e.removeEventListener("keydown",n._handleKeyDown);var r=n.getCurtains();r.forEach((function(e){e.classList.remove("is-active"),e.removeEventListener("click",n.close)})),n.emit("close"),setTimeout((function(){r.forEach((function(e){return e.classList.remove("is-displayed")})),n.emit("closed")}),t.TRANSITION_TIME)})),n}return g()(t,e),c()(t,[{key:"getCurtains",value:function(){var e=L()(document.querySelectorAll(".o-curtain"));if(!e.find((function(e){return!e.classList.contains("o-curtain--local")}))){var t=document.createElement("div");t.classList.add("o-curtain"),e.push(t),document.body.appendChild(t)}return e}},{key:"open",value:function(){var e=this,t=document.querySelector("html");t.style.overflow="hidden",t.addEventListener("keydown",this._handleKeyDown);var n=this.getCurtains();n.forEach((function(t){t.classList.add("is-displayed"),t.addEventListener("click",e.close)})),requestAnimationFrame((function(){return requestAnimationFrame((function(){n.forEach((function(e){return e.classList.add("is-active")}))}))}))}}]),t}(y.EventEmitter);l()(T,"TRANSITION_TIME",500);var E=new T,b=function(e){function t(){var e,n;s()(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=p()(this,(e=_()(t)).call.apply(e,[this].concat(i))),l()(C()(n),"_isActive",!1),l()(C()(n),"_currentButton",null),l()(C()(n),"_currentParent",null),l()(C()(n),"_currentContent",null),l()(C()(n),"_currentWrapper",null),l()(C()(n),"_onContentClick",(function(e){e.target===n._currentContent&&E.close()})),l()(C()(n),"_closeTab",(function(){var e=n._currentButton,t=n._currentParent,r=n._currentContent,i=n._currentWrapper;n._isActive=!1,n._currentButton=null,n._currentParent=null,n._currentContent=null,n._currentWrapper=null,t&&t.classList.remove("is-active"),e&&e.classList.remove("is-active"),i&&i.classList.add("o-curtain-dropdown__drop-wrapper--out"),r&&r.removeEventListener("click",n._onContentClick),E.removeListener("close",n._onCurtainClose),setTimeout((function(){r&&t&&t.appendChild(r),r&&(r.style.height=""),i&&i.remove()}),T.TRANSITION_TIME)})),l()(C()(n),"_onCurtainClose",(function(){n.emit("close"),n._closeTab()})),n}return g()(t,e),c()(t,[{key:"open",value:function(e){if(!e.classList.contains("is-active")){this._isActive&&this._closeTab();var n=e.getAttribute("data-cdrop-parent"),r=e.getAttribute("data-cdrop-target"),i=document.querySelector(n),o=document.querySelector(r);if(i&&o){var s=this._getContentWrapper();s.appendChild(o),this._isActive=!0,this._currentButton=e,this._currentParent=i,this._currentContent=o,this._currentWrapper=s;var a=i.getBoundingClientRect().height;i.classList.add("is-active"),e.classList.add("is-active"),E.open(),o.style.height=t._supportsCalc?"calc(100vh - ".concat(a,"px)"):"".concat(window.innerHeight-a,"px"),o.addEventListener("click",this._onContentClick),E.addListener("close",this._onCurtainClose),i.appendChild(s),requestAnimationFrame((function(){return requestAnimationFrame((function(){s.classList.remove("o-curtain-dropdown__drop-wrapper--pre-in")}))}))}}}},{key:"_getContentWrapper",value:function(){var e=document.createElement("div");return e.classList.add("o-curtain-dropdown__drop-wrapper","o-curtain-dropdown__drop-wrapper--pre-in"),e}},{key:"close",value:function(){this._isActive&&E.close()}},{key:"isOpen",value:function(){return this._isActive}}]),t}(y.EventEmitter);l()(b,"_supportsCalc",window.CSS&&window.CSS.supports&&window.CSS.supports("height","calc(100vh - 100px)"));var k,A=new b,B=function(){function e(t){var n=this;s()(this,e),l()(this,"_onButtonClick",(function(t){t.preventDefault();for(var r=0,o=Object.entries(e.ButtonSelectors);r<o.length;r++){var s=i()(o[r],2),a=s[0],c=s[1];if(t.currentTarget.matches(c))return void(n.navState.getActiveTab()===a?n.navState.closeOpenTab():n.navState.openTab(a))}})),l()(this,"onCurtainClose",(function(){n.navState.closeOpenTab()})),l()(this,"onOpen",(function(e){var t=e.tabName;n.openTab(t)})),l()(this,"onClose",(function(){n.closeTab()})),this.navState=t,A.addListener("close",this.onCurtainClose),this.navState.addListener("onOpen",this.onOpen),this.navState.addListener("onClose",this.onClose),this._updateButtonListeners("add");var r=this.navState.getActiveTab();r&&this.openTab(r)}return c()(e,[{key:"_updateButtonListeners",value:function(t){for(var n=0,r=Object.values(e.ButtonSelectors);n<r.length;n++){var i=r[n],o=document.querySelector(i);o&&o["".concat(t,"EventListener")]("click",this._onButtonClick)}}},{key:"unmount",value:function(){this.closeTab(),A.removeListener("close",this.onCurtainClose),this.navState.removeListener("onOpen",this.onOpen),this.navState.removeListener("onClose",this.onClose),this._updateButtonListeners("remove")}},{key:"closeTab",value:function(){A.isOpen()&&A.close()}},{key:"openTab",value:function(t){var n=e.ButtonSelectors[t];if(n){var r=document.querySelector(n);r&&A.open(r)}}}]),e}();l()(B,"ButtonSelectors",(k={},l()(k,v.a.Tabs.ACCOUNT_MENU,".js-gu-trigger.js-gu-account"),l()(k,v.a.Tabs.BASKET,".js-gu-trigger.js-gu-basket"),l()(k,v.a.Tabs.CURRENCY_SELECT,".js-gu-trigger.js-gu-currency"),k));t.default=B}}]);
//# sourceMappingURL=64-3f7411a396cb1198e314.js.map