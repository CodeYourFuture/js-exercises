(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{BzW7:function(e,t,i){"use strict";var a=i("lwsE"),r=i.n(a),n=i("W8MJ"),o=i.n(n),s=i("a1gu"),c=i.n(s),l=i("Nsbk"),u=i.n(l),p=i("PJYZ"),b=i.n(p),m=i("7W2i"),h=i.n(m),d=i("q1tI"),g=i.n(d),f=i("17x9"),v=i.n(f),_=i("bMjp"),w={width:v.a.number.isRequired,height:v.a.number.isRequired,src:v.a.string.isRequired},y=function(e){function t(e){var i;return r()(this,t),(i=c()(this,u()(t).call(this,e)))._onVisibilityUpdate=i._onVisibilityUpdate.bind(b()(i)),i.state={hasBeenInViewport:!1,imageIsLoaded:!1},i._isVisible=!1,i}return h()(t,e),o()(t,[{key:"componentDidMount",value:function(){_.a.observe(this.refs.root,this._onVisibilityUpdate)}},{key:"componentWillUnmount",value:function(){_.a.unobserve(this.refs.root)}},{key:"componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.setState({hasBeenInViewport:this._isVisible,imageIsLoaded:!1})}},{key:"_onVisibilityUpdate",value:function(e){var t=this;e.intersectionRatio?(this._isVisible=!0,this.state.hasBeenInViewport||requestAnimationFrame((function(){t.setState({hasBeenInViewport:!0})}))):this._isVisible=!1}},{key:"render",value:function(){var e=this;return g.a.createElement("div",{className:"o-lz-load o-sized".concat(this.props.className?" "+this.props.className:""),style:{maxWidth:"".concat(this.props.width,"px")}},g.a.createElement("div",{className:"o-sized__sizer o-lz-load__bg",ref:"root",style:{paddingBottom:"".concat(Math.round(this.props.height/this.props.width*100),"%")}}),this.state.imageIsLoaded&&this.state.hasBeenInViewport?null:g.a.createElement("div",{className:"o-lz-load__icon"},g.a.createElement("i",{className:"u-color--black o-i o-i--spinner o-i--lg o-i--spin"})),g.a.createElement("img",{key:this.props.src,style:{visibility:this.state.hasBeenInViewport?null:"hidden"},className:"o-sized__content",width:this.props.width,height:this.props.height,src:this.state.hasBeenInViewport?this.props.src:null,onLoad:this.state.imageIsLoaded?null:function(t){return e._onImgLoad(t)}}))}},{key:"_onImgLoad",value:function(e){this.setState({imageIsLoaded:!0})}}]),t}(d.Component);y.propTypes=w,t.a=y},HGIe:function(e,t,i){"use strict";var a=i("J4zp"),r=i.n(a);function n(e,t){if(!n.sizes.hasOwnProperty(t))throw new Error('"targetSize" must be one of: "'+Object.keys(n.sizes).join('", "')+'", not "${targetSize}"');var i=e.width,a=e.height,o=r()(n.sizes[t],2),s=o[0],c=o[1],l=1;if(i>a){if(i<=s)return{width:i,height:a};l=s/i}else{if(a<=c)return{width:i,height:a};l=c/a}return{width:Math.round(l*i),height:Math.round(l*a)}}n.sizes={s:[140,210],m:[263,400],l:[1024,1024]},t.a=n},QrkV:function(e,t,i){"use strict";var a=i("lSNA"),r=i.n(a),n=i("cDf5"),o=i.n(n);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={getValidationViolation:function(e){if(!e)throw new Error("dims is required, but not given.");for(var t=0,i=["width","height"];t<i.length;t++){var a=i[t];if(e.hasOwnProperty(a))return new Error('dims does not have a property "'.concat(a,'"'));if("number"!=typeof e[a])return new Error('dims property "'.concat(a,'" has a type of "').concat(o()(e[a]),'" not "number".'))}},isValid:function(e){return!l.getValidationViolation(e)},limit:{byHeight:function(e,t){if("number"!=typeof e)throw new Error('"limit" must be a number.');if(e<=0)throw new Error('"limit" must be greater than 0.');if(l.isValid(t))throw l.getValidationViolation(t);t.width;var i=t.height;return i<=e?t:l.scale(e/i,t)},byWidth:function(e,t){if("number"!=typeof e)throw new Error('"limit" must be a number.');if(e<=0)throw new Error('"limit" must be greater than 0.');if(l.isValid(t))throw l.getValidationViolation(t);var i=t.width;t.height;return i<=e?t:l.scale(e/i,t)}},round:function(e){if(l.isValid(e))throw l.getValidationViolation(e);var t=Math.round(e.width),i=Math.round(e.height);return t!==e.width||i!==e.height?c({},e,{width:Math.round(e.width),height:Math.round(e.height)}):e},scale:function(e,t){if("number"!=typeof e)throw new Error('"scale" must be a number.');if(e<=0)throw new Error('"limit" must be greater than 0.');if(l.isValid(t))throw l.getValidationViolation(t);return 1===e?t:c({},t,{width:e*t.width,height:e*t.height})}};t.a=l},dHbs:function(e,t,i){"use strict";i.r(t);var a=i("q1tI"),r=i.n(a),n=i("rURQ");t.default=function(e){return r.a.createElement("div",{className:"js-slider c-carousel"},r.a.createElement("div",{className:"c-carousel__wrapper ".concat("")},r.a.createElement("div",{className:"c-carousel__controls"},r.a.createElement("div",{className:"js-slider--prev c-carousel__control c-carousel__control--prev"},r.a.createElement("i",{className:"o-i o-i--chev o-i--270deg"})),r.a.createElement("div",{className:"js-slider--next c-carousel__control c-carousel__control--next"},r.a.createElement("i",{className:"o-i o-i--chev o-i--90deg"}))),r.a.createElement("ul",{className:"js-slider--container c-carousel__frame ".concat("")},e.books.map((function(e){return r.a.createElement("li",{key:e.isbn13,className:"c-carousel__item ".concat(""),"data-scarabitem":e.isbn13},r.a.createElement(n.a,{book:e,portrait:!0}))})))),r.a.createElement("div",{className:"js-slider--nav c-carousel__nav"},r.a.createElement("button",{className:"js-slider--pnav c-carousel__nav-item","aria-label":"carousel navigation"})))}},rURQ:function(e,t,i){"use strict";var a=i("RIqP"),r=i.n(a),n=i("pVnL"),o=i.n(n),s=i("QILm"),c=i.n(s),l=i("q1tI"),u=i.n(l),p=i("BzW7"),b=i("7O+I"),m=i("HGIe"),h=i("lvEx"),d=i("QrkV"),g=function(e){var t=e.jacketSize,i=e.jacketVersion,a=e.isbn13,r=e.size,n=c()(e,["jacketSize","jacketVersion","isbn13","size"]);if(!a)return null;var s=Object(b.a)({isbn13:a,jacketVersion:i,size:r});if(!t)return u.a.createElement("img",o()({},n,{src:s}));var l=Object(m.a)(t,r);return l=d.a.limit.byHeight(250,l),l=d.a.round(l),u.a.createElement(p.a,o()({},n,l,{src:Object(b.a)({isbn13:a,jacketVersion:i,resize:l})}))},f=function e(t){var i=t.currency,a=t.price;return"number"==typeof a&&(a=Math.round(100*a)/100),e.prefixes[i.toUpperCase()]+a};f.prefixes={GBP:"£",EUR:"€",USD:"$",CAD:"CA$",AUD:"AU$"};var v=function(e){return[[/^\s+|[^a-z0-9-\s]|\s+$/gi,""],[/\s+/g,"-"],[/-{2,}/g,"-"]].reduce((function(e,t){return e.replace.apply(e,r()(t))}),e.toLowerCase())},_=function(e){var t=e.currency,i=e.price,a=e.rrp,r=e.availability,n=e.rrpDisplayLimit,s=void 0===n?.95:n,l=e.as,p=void 0===l?"span":l,b=c()(e,["currency","price","rrp","availability","rrpDisplayLimit","as"]);if("OOS"===r||!i)return null;var m=null;a&&(parseFloat(i,10)/parseFloat(a,10)<s&&(m=u.a.createElement("del",{title:"RRP",className:"c-price__rrp"},f({currency:t,price:a}))));return u.a.createElement(p,o()({},b,{className:"c-price ".concat(b.className)}),f({currency:t,price:i})," ",m)};t.a=function(e){var t=e.book,i=e.priceExtra,a=e.className,r=e.action,n=e.extraContent,o=e.portrait,s=function(e){if(e.isbn13){if(!e.title)return"/"+e.isbn13;var t=v(e.title);return e.contributors&&e.contributors[0]&&e.contributors[0].name&&(t+="-".concat(v(e.contributors[0].name))),"/".concat(t,"-").concat(e.isbn13)}}(t.biblio),c=function(e){if(e){var t=[];return e.format&&t.push(e.format),e.languages&&e.languages[0]&&e.languages[0].language&&t.push(e.languages[0].language),t.join(", ")}}(t.biblio),l=!t.pricing||"OOS"===t.pricing.availability,p=t.pricing&&t.pricing.isExpeditable,b=t.pricing&&t.pricing.isReadyToGo,m=p||b;return u.a.createElement("div",{className:"c-book".concat(o?" c-book--portrait":""," ").concat(a)},u.a.createElement("a",{href:s,className:"c-book__media ga-view"},u.a.createElement(g,{className:"c-book__img",jacketSize:t.biblio.jacketSize,jacketVersion:t.biblio.jacketVersion,isbn13:t.biblio.isbn13,size:"m"}),m&&u.a.createElement("span",{className:"o-i-stack c-book__badge"},u.a.createElement("i",{className:"o-i-stack__2x o-i o-i--circle u-color--white o-i--lg"}),u.a.createElement("i",{className:"o-i-stack__1x o-i o-i--express u-color--blue-light o-i--lg"}))),u.a.createElement("div",{className:"c-book__body"},u.a.createElement("a",{className:"c-book__title",href:s},t.biblio.title,t.biblio.subtitle?": ".concat(t.biblio.subtitle," "):" "),c&&u.a.createElement("small",{className:"c-book__meta"},"(",c,")"),u.a.createElement("span",{className:"c-book__by"},t.biblio.contributors&&t.biblio.contributors.map((function(e){return e.name})).filter((function(e,t,i){return i.indexOf(e)===t&&e})).slice(0,2).map((function(e,t){return u.a.createElement(u.a.Fragment,{key:e},!!t&&", ",u.a.createElement("a",{href:(i=e,"/".concat(v(i),"-author"))},e));var i}))),(t.biblio.shortDescription||t.biblio.longDescription)&&u.a.createElement("p",{className:"c-book__description"},t.biblio.shortDescription?t.biblio.shortDescription:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.length>t?e.split("\n")[0].substring(0,t)+i:e}(t.biblio.longDescription,400)),t.pricing&&"OOS"!==t.pricing.availability&&u.a.createElement(u.a.Fragment,null,i,u.a.createElement(_,{className:"c-book__price",currency:t.pricing.currency,price:t.pricing.price,rrp:t.pricing.rrp,availability:t.pricing.availability})),u.a.createElement("span",{className:"c-book__actions".concat(l?" c-book__actions--none":"").concat(p||b?" c-book__actions--express":"")},u.a.createElement("span",{className:"c-book__atb"},l?"Currently Unavailable":u.a.createElement(h.a,{btnClasses:"c-btn--block",isbn13:t.isbn13,preOrder:t.pricing&&"Preorder"===t.pricing.dispatch})),u.a.createElement("span",{className:"c-book__link"},null!=r?r:u.a.createElement("a",{href:s,className:"c-btn c-btn--alt c-btn--block"},"More details"))),(p||b)&&u.a.createElement("span",{className:"c-book__express"},u.a.createElement("b",{className:"c-express"},p?"Express Delivery":"Ready To Go"),p&&"Available"),n))}}}]);
//# sourceMappingURL=56-18ff255f55a459c23a03.js.map